(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{272:function(v,e,_){"use strict";_.r(e);var a=_(19),t=Object(a.a)({},(function(){var v=this,e=v.$createElement,_=v._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"介绍"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[v._v("#")]),v._v(" 介绍")]),v._v(" "),_("h2",{attrs:{id:"生成在线查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#生成在线查询"}},[v._v("#")]),v._v(" 生成在线查询")]),v._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[v._v("docker run -it --env-file"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v(".env -e "),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"CONFIG='),_("span",{pre:!0,attrs:{class:"token variable"}},[_("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$(")]),_("span",{pre:!0,attrs:{class:"token function"}},[v._v("cat")]),v._v(" config.json "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("|")]),v._v(" jq -r tostring"),_("span",{pre:!0,attrs:{class:"token variable"}},[v._v(")")])]),v._v('"')]),v._v(" algolia/docsearch-scraper\n")])])]),_("h2",{attrs:{id:"我的开发规范"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#我的开发规范"}},[v._v("#")]),v._v(" 我的开发规范")]),v._v(" "),_("h3",{attrs:{id:"数据库设计（jpa版本）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据库设计（jpa版本）"}},[v._v("#")]),v._v(" 数据库设计（JPA版本）")]),v._v(" "),_("ul",[_("li",[v._v("每张表的主键都叫 id，外键就叫表名+id，表名和字段都为英文全小写，单词之间用_隔开。id 的数据类型为"),_("code",[v._v("unsigned bigint(19)")]),v._v("(0 到约 10 的 19 次方)，对应Java实体类为"),_("code",[v._v("Long")]),v._v("。")]),v._v(" "),_("li",[v._v("字符串类型基本定长的直接选用"),_("code",[v._v("char")]),v._v(",不定长的用"),_("code",[v._v("varchar")]),v._v("，全部要限定长度，对应实体类的"),_("code",[v._v("String")]),v._v("。长度超过5000的再用"),_("code",[v._v("text")]),v._v("。MySQL5.0.3之后varchar(n)这里的n表示字符数，不管是英文还是中文都能存放n个。")]),v._v(" "),_("li",[v._v("小数类型用"),_("code",[v._v("decimal")]),v._v("，禁止用"),_("code",[v._v("float")]),v._v("和"),_("code",[v._v("double")]),v._v("。")]),v._v(" "),_("li",[v._v("表达是否概念的字段，用 is_xxx，类型为"),_("code",[v._v("unsigned tinyint")]),v._v("(0-255)，对应实体类 xxx，类型为"),_("code",[v._v("Boolean")]),v._v("，例如 "),_("code",[v._v("is_del")]),v._v(" 对应 "),_("code",[v._v("Boolean del")]),v._v("。")]),v._v(" "),_("li",[v._v("涉及到前端为"),_("code",[v._v("textarea")]),v._v("的，还是用"),_("code",[v._v("varchar")]),v._v("存储。")]),v._v(" "),_("li",[v._v("每个表中的必要字段，id,create_time,modify_time,create_by,modify_by,is_del。类型分别为"),_("code",[v._v("unsigned bigint")]),v._v(","),_("code",[v._v("datetime")]),v._v(","),_("code",[v._v("datetime")]),v._v(","),_("code",[v._v("unsigned bigint")]),v._v(","),_("code",[v._v("unsigned bigint")]),v._v(","),_("code",[v._v("unsigned tinyint")]),v._v("。")])]),v._v(" "),_("h3",{attrs:{id:"实体类设计（jpa版本）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#实体类设计（jpa版本）"}},[v._v("#")]),v._v(" 实体类设计（JPA版本）")]),v._v(" "),_("ul",[_("li",[v._v("不使用 Hibernate 和 jpa 的 "),_("code",[v._v("@OneToMany")]),v._v("等建立orm表映射的注解。")]),v._v(" "),_("li",[v._v("类上加"),_("code",[v._v("@Entity")]),v._v(","),_("code",[v._v('@Table(name="")')]),v._v(","),_("code",[v._v("@Data")]),v._v("标识实体类和实体类对应的表并使用"),_("code",[v._v("lombok")]),v._v("。"),_("code",[v._v("@Entity")]),v._v("默认将类名和相同的数据库表名以及属性和数据库的字段做映射，（也可不加"),_("code",[v._v("@Table")]),v._v(",直接用"),_("code",[v._v('@Entity(name="")')]),v._v("指定对应表。)"),_("code",[v._v("@Table")]),v._v("比"),_("code",[v._v("@Entity")]),v._v("强大一些，有更多的参数，但是"),_("code",[v._v("@Entity")]),v._v("是必须的。")]),v._v(" "),_("li",[v._v("每个字段用驼峰式进行自动映射，虽然大多可以自动映射，但是为避免出现问题，必须加上"),_("code",[v._v("@Column()")]),v._v("标识。涉及到上述"),_("code",[v._v("is_xxx")]),v._v("，实体类中直接起名为 xxx。")]),v._v(" "),_("li",[v._v("涉及到业务上必须有值的字段，一定要根据实际情况加上"),_("code",[v._v("@NotEmpty")]),v._v("或"),_("code",[v._v("@NotBlank")]),v._v("或"),_("code",[v._v("@NotNull")]),v._v("。")]),v._v(" "),_("li",[_("code",[v._v("String")]),v._v("类型字段一定要加上"),_("code",[v._v("Length")]),v._v("并指定"),_("code",[v._v("max")]),v._v("大小，以便和数据库对应。")]),v._v(" "),_("li",[v._v("小数全部使用"),_("code",[v._v("BigDecimal")]),v._v("类型，用"),_("code",[v._v("Double")]),v._v("或"),_("code",[v._v("Float")]),v._v("计算必会产生误差，最后坑的雅痞。")]),v._v(" "),_("li",[v._v("日期类型上加上"),_("code",[v._v('@DateTimeFormat(pattern = "yyyy-MM-dd")')]),v._v("和"),_("code",[v._v('@JsonFormat(pattern="yyyy-MM-dd",timezone="GMT+8")')]),v._v("进行入参格式化和出参格式化。")])]),v._v(" "),_("h3",{attrs:{id:"controller"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#controller"}},[v._v("#")]),v._v(" Controller")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("Springboot")]),v._v("前后端分离项目直接使用"),_("code",[v._v("@RestController")]),v._v("和"),_("code",[v._v("@RequestMapping")]),v._v("。")]),v._v(" "),_("li",[v._v("方法上注解使用"),_("code",[v._v("@GetMapping")]),v._v("或"),_("code",[v._v("@PostMapping")]),v._v("，一律使用"),_("code",[v._v("ResponseResult")]),v._v("类做响应体。如果要使用"),_("code",[v._v("Swagger2")]),v._v("做接口文档，则再根据需要添加额外注解。")]),v._v(" "),_("li",[v._v("Controller 层因不存在事务不做任何业务处理，最多只做传值赋值等非持久化操作。")])]),v._v(" "),_("h3",{attrs:{id:"service"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[v._v("#")]),v._v(" Service")]),v._v(" "),_("ul",[_("li",[v._v("Service 必须存在一个接口层，以便后期根据不同实现切换，尽管现在只有一个实现。")]),v._v(" "),_("li",[v._v("实现类上加"),_("code",[v._v("@Service")]),v._v("。")]),v._v(" "),_("li",[v._v("方法上根据需要加"),_("code",[v._v("@Transactional")]),v._v("，注意设置"),_("code",[v._v("readOnly")]),v._v("属性是否只读(默认为"),_("code",[v._v("false")]),v._v(")。当设置"),_("code",[v._v("@Transactional(readOnly=true)")]),v._v("，链接会被设置为只读，如果这时候进行修改操作，就会报错并提示链接只读的。如果方法中仅运行了一条SQL，"),_("code",[v._v("@Transactional")]),v._v("没必要加。如果存在多行修改的SQL，必须加"),_("code",[v._v("@Transactional")]),v._v("。")])]),v._v(" "),_("h3",{attrs:{id:"dao（jpa版本）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dao（jpa版本）"}},[v._v("#")]),v._v(" Dao（JPA版本）")]),v._v(" "),_("ul",[_("li",[v._v("接口继承"),_("code",[v._v("JpaRepositor")]),v._v("和"),_("code",[v._v("JpaSpecificationExecutor")]),v._v("，省去书写冗余代码。")])])])}),[],!1,null,null,null);e.default=t.exports}}]);