<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编程规约 | 小二温不胜</title>
    <meta name="description" content="温不胜的blog">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.ea35a998.css" as="style"><link rel="preload" href="/assets/js/app.eaf28791.js" as="script"><link rel="preload" href="/assets/js/2.fa3ecc99.js" as="script"><link rel="preload" href="/assets/js/11.95a60a95.js" as="script"><link rel="preload" href="/assets/js/3.10cb9937.js" as="script"><link rel="prefetch" href="/assets/js/10.a03c2ffe.js"><link rel="prefetch" href="/assets/js/12.9dc19dc2.js"><link rel="prefetch" href="/assets/js/13.a433ac75.js"><link rel="prefetch" href="/assets/js/14.3295ff5c.js"><link rel="prefetch" href="/assets/js/15.e6716263.js"><link rel="prefetch" href="/assets/js/16.166690eb.js"><link rel="prefetch" href="/assets/js/17.065d163d.js"><link rel="prefetch" href="/assets/js/18.c001d191.js"><link rel="prefetch" href="/assets/js/19.48f58e56.js"><link rel="prefetch" href="/assets/js/20.6eb2b873.js"><link rel="prefetch" href="/assets/js/21.b4a230f8.js"><link rel="prefetch" href="/assets/js/22.7ceac6ef.js"><link rel="prefetch" href="/assets/js/23.820766ea.js"><link rel="prefetch" href="/assets/js/24.bc33463e.js"><link rel="prefetch" href="/assets/js/25.929c3fca.js"><link rel="prefetch" href="/assets/js/26.5fffa4f6.js"><link rel="prefetch" href="/assets/js/27.8312e26b.js"><link rel="prefetch" href="/assets/js/28.f516dc05.js"><link rel="prefetch" href="/assets/js/29.e49d61fa.js"><link rel="prefetch" href="/assets/js/30.b57cfc86.js"><link rel="prefetch" href="/assets/js/31.f48b2990.js"><link rel="prefetch" href="/assets/js/32.7b0f30ce.js"><link rel="prefetch" href="/assets/js/33.bb360a7d.js"><link rel="prefetch" href="/assets/js/34.89911168.js"><link rel="prefetch" href="/assets/js/35.f4e5ce8a.js"><link rel="prefetch" href="/assets/js/36.2ead6a62.js"><link rel="prefetch" href="/assets/js/37.8cf39a35.js"><link rel="prefetch" href="/assets/js/38.7e81dd47.js"><link rel="prefetch" href="/assets/js/39.91566f24.js"><link rel="prefetch" href="/assets/js/4.68b0d9ff.js"><link rel="prefetch" href="/assets/js/40.40723fec.js"><link rel="prefetch" href="/assets/js/41.80a357d6.js"><link rel="prefetch" href="/assets/js/42.8feb4425.js"><link rel="prefetch" href="/assets/js/43.75de5416.js"><link rel="prefetch" href="/assets/js/44.c67c89ac.js"><link rel="prefetch" href="/assets/js/45.951710ae.js"><link rel="prefetch" href="/assets/js/46.08ba84fe.js"><link rel="prefetch" href="/assets/js/47.4c60a1b9.js"><link rel="prefetch" href="/assets/js/48.5f16206a.js"><link rel="prefetch" href="/assets/js/49.5b2b9b69.js"><link rel="prefetch" href="/assets/js/5.7c40eeda.js"><link rel="prefetch" href="/assets/js/50.d1104d69.js"><link rel="prefetch" href="/assets/js/51.1e40629c.js"><link rel="prefetch" href="/assets/js/52.39d3f6ea.js"><link rel="prefetch" href="/assets/js/53.d700d255.js"><link rel="prefetch" href="/assets/js/54.5f5a432c.js"><link rel="prefetch" href="/assets/js/55.ae12df51.js"><link rel="prefetch" href="/assets/js/56.7d84fd7f.js"><link rel="prefetch" href="/assets/js/57.ee8b051f.js"><link rel="prefetch" href="/assets/js/58.d342e3b0.js"><link rel="prefetch" href="/assets/js/59.3729eb8e.js"><link rel="prefetch" href="/assets/js/6.5d062d06.js"><link rel="prefetch" href="/assets/js/60.14e226d6.js"><link rel="prefetch" href="/assets/js/61.081106a1.js"><link rel="prefetch" href="/assets/js/62.1e514d7d.js"><link rel="prefetch" href="/assets/js/63.12ed4210.js"><link rel="prefetch" href="/assets/js/64.4cfbaca0.js"><link rel="prefetch" href="/assets/js/65.e46fb64c.js"><link rel="prefetch" href="/assets/js/66.6a1ec14b.js"><link rel="prefetch" href="/assets/js/67.9136d141.js"><link rel="prefetch" href="/assets/js/68.f4ea08ee.js"><link rel="prefetch" href="/assets/js/69.ea17529c.js"><link rel="prefetch" href="/assets/js/7.56a23a8d.js"><link rel="prefetch" href="/assets/js/70.32f08434.js"><link rel="prefetch" href="/assets/js/71.3d864d64.js"><link rel="prefetch" href="/assets/js/72.6bcfd274.js"><link rel="prefetch" href="/assets/js/73.ccdb3b1d.js"><link rel="prefetch" href="/assets/js/74.312ccc42.js"><link rel="prefetch" href="/assets/js/75.5f8b72a8.js"><link rel="prefetch" href="/assets/js/76.ab6b1de5.js"><link rel="prefetch" href="/assets/js/77.5366c98a.js"><link rel="prefetch" href="/assets/js/78.1b86e7d1.js"><link rel="prefetch" href="/assets/js/79.8e468119.js"><link rel="prefetch" href="/assets/js/8.bca3974e.js"><link rel="prefetch" href="/assets/js/80.acd334e8.js"><link rel="prefetch" href="/assets/js/81.5187a51a.js"><link rel="prefetch" href="/assets/js/82.dce69e74.js"><link rel="prefetch" href="/assets/js/83.212b120b.js"><link rel="prefetch" href="/assets/js/84.1c2e5e8c.js"><link rel="prefetch" href="/assets/js/9.8b949133.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea35a998.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小二温不胜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/java/" class="nav-link router-link-exact-active router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/backend/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/backend/internet/" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/navicat/" class="nav-link">
  Navicat
</a></li><li class="dropdown-item"><!----> <a href="/tools/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/tools/nginx/" class="nav-link">
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/cicd/" class="nav-link">
  CICD
</a></li><li class="dropdown-item"><!----> <a href="/others/sdk/" class="nav-link">
  SDK
</a></li><li class="dropdown-item"><!----> <a href="/others/issues/" class="nav-link">
  Issues
</a></li><li class="dropdown-item"><!----> <a href="/others/utils/" class="nav-link">
  Utils
</a></li><li class="dropdown-item"><!----> <a href="/others/work/" class="nav-link">
  工作记录
</a></li><li class="dropdown-item"><!----> <a href="/others/interview/" class="nav-link">
  面试宝典
</a></li></ul></div></div> <a href="https://github.com/JinbiaoYin/myblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/java/" class="nav-link router-link-exact-active router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/backend/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/backend/internet/" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/navicat/" class="nav-link">
  Navicat
</a></li><li class="dropdown-item"><!----> <a href="/tools/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/tools/nginx/" class="nav-link">
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/cicd/" class="nav-link">
  CICD
</a></li><li class="dropdown-item"><!----> <a href="/others/sdk/" class="nav-link">
  SDK
</a></li><li class="dropdown-item"><!----> <a href="/others/issues/" class="nav-link">
  Issues
</a></li><li class="dropdown-item"><!----> <a href="/others/utils/" class="nav-link">
  Utils
</a></li><li class="dropdown-item"><!----> <a href="/others/work/" class="nav-link">
  工作记录
</a></li><li class="dropdown-item"><!----> <a href="/others/interview/" class="nav-link">
  面试宝典
</a></li></ul></div></div> <a href="https://github.com/JinbiaoYin/myblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JAVA</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/java/" class="active sidebar-link">编程规约</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/java/#一-命名风格" class="sidebar-link">(一) 命名风格</a></li><li class="sidebar-sub-header"><a href="/backend/java/#二-常量定义" class="sidebar-link">(二) 常量定义</a></li><li class="sidebar-sub-header"><a href="/backend/java/#三-代码格式" class="sidebar-link">(三) 代码格式</a></li><li class="sidebar-sub-header"><a href="/backend/java/#四-oop-规约" class="sidebar-link">(四) OOP 规约</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java 编程思想</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/java/a-1.html" class="sidebar-link">第1章 对象导论</a></li><li><a href="/backend/java/b-2.html" class="sidebar-link">第2章 一切都是对象</a></li><li><a href="/backend/java/c-3.html" class="sidebar-link">第3章 操作符</a></li><li><a href="/backend/java/d-4.html" class="sidebar-link">第4章 控制执行流程</a></li><li><a href="/backend/java/e-5.html" class="sidebar-link">第5章 初始化与清理</a></li><li><a href="/backend/java/f-6.html" class="sidebar-link">第6章 访问权限控制</a></li><li><a href="/backend/java/h-7.html" class="sidebar-link">第7章 复用类</a></li><li><a href="/backend/java/i-8.html" class="sidebar-link">第8章 多态</a></li><li><a href="/backend/java/j-9.html" class="sidebar-link">第9章 接口</a></li><li><a href="/backend/java/k-10.html" class="sidebar-link">第10章 内部类</a></li><li><a href="/backend/java/l-11.html" class="sidebar-link">第11章 持有对象</a></li><li><a href="/backend/java/m-12.html" class="sidebar-link">第12章 异常</a></li><li><a href="/backend/java/n-13.html" class="sidebar-link">第13章 字符串</a></li><li><a href="/backend/java/o-14.html" class="sidebar-link">第14章 类型信息</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/java/elasticsearch.html" class="sidebar-link">Elastic Search</a></li><li><a href="/backend/java/lombok.html" class="sidebar-link">lombok</a></li><li><a href="/backend/java/mybatis.html" class="sidebar-link">mybatis</a></li><li><a href="/backend/java/quartz.html" class="sidebar-link">quartz</a></li><li><a href="/backend/java/rabbitMQ.html" class="sidebar-link">RabbitMQ</a></li><li><a href="/backend/java/spring-security-oauth2.html" class="sidebar-link">Spring Security Oauth2</a></li><li><a href="/backend/java/swagger.html" class="sidebar-link">swagger</a></li><li><a href="/backend/java/websocket.html" class="sidebar-link">websocket</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="一-命名风格"><a href="#一-命名风格" class="header-anchor">#</a> (一) 命名风格</h2> <ol><li><p>【强制】代码中的命名均不能以下划线或美元符号开始，也不能以下划线或美元符号结束。<br>
反例：<em>name / <em><em>name / $name / name</em> / name$ / name</em></em></p></li> <li><p>【强制】所有编程相关的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。<br>
说明：正确的英文拼写和语法可以让阅读者易于理解，避免歧义。注意，纯拼音命名方式更要避免采用。<br>
正例：ali / alibaba / taobao / cainiao/ aliyun/ youku / hangzhou 等国际通用的名称，可视同英文。<br>
反例：DaZhePromotion [打折] / getPingfenByName() [评分] / int 某变量 = 3</p></li> <li><p>【强制】类名使用 UpperCamelCase 风格，但以下情形例外：DO / BO / DTO / VO / AO / PO / UID 等。<br>
正例：ForceCode / UserDO / HtmlDTO / XmlService / TcpUdpDeal / TaPromotion<br>
反例：forcecode / UserDo / HTMLDto / XMLService / TCPUDPDeal / TAPromotion</p></li> <li><p>【强制】方法名、参数名、成员变量、局部变量都统一使用 lowerCamelCase 风格。<br>
正例： localValue / getHttpMessage() / inputUserId</p></li> <li><p>【强制】常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。<br>
正例：MAX_STOCK_COUNT / CACHE_EXPIRED_TIME<br>
反例：MAX_COUNT / EXPIRED_TIME</p></li> <li><p>【强制】抽象类命名使用 <code>Abstract</code> 或 <code>Base</code> 开头；异常类命名使用 <code>Exception</code> 结尾；测试类命名以它要测试的类的名称开始，以 Test 结尾。</p></li> <li><p>【强制】类型与中括号紧挨相连来表示数组。<br>
正例：定义整形数组 <code>int[] arrayDemo</code>;<br>
反例：在 main 参数中，使用 <code>String args[]</code>来定义。</p></li> <li><p>【强制】POJO 类中的任何布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误。<br>
说明：在本文 MySQL 规约中的建表约定第一条，表达是与否的值采用 is_xxx 的命名方式，所以，需要在<code>&lt;resultMap&gt;</code>设置从 is_xxx 到 xxx 的映射关系。<br>
反例：定义为基本数据类型 <code>Boolean isDeleted</code> 的属性，它的方法也是 <code>isDeleted()</code>，框架在反向解析的时候，“误以为”对应的属性名称是 deleted，导致属性获取不到，进而抛出异常。</p></li> <li><p>【强制】包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。<br>
正例：应用工具类包名为 <code>com.alibaba.ei.kunlun.aap.util</code>、类名为 <code>MessageUtils</code>（此规则参考 spring 的框架结构）</p></li> <li><p>【强制】避免在子父类的成员变量之间、或者不同代码块的局部变量之间采用完全相同的命名，使可读性降低。<br>
说明：子类、父类成员变量名相同，即使是 public 类型的变量也是能够通过编译，而局部变量在同一方法内的不同代码块中同名也是合法的，但是要避免使用。对于非 setter/getter 的参数名称也要避免与成员变量名称相同。<br>
反例：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfusingName</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> stock<span class="token punctuation">;</span>
	<span class="token comment">// 非 setter/getter 的参数名称，不允许与本类成员变量同名</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> alibaba<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">final</span> <span class="token keyword">int</span> money <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span>
			<span class="token comment">// ...</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 在同一方法体中，不允许与其它代码块中的 money 命名相同</span>
			<span class="token keyword">final</span> <span class="token keyword">int</span> money <span class="token operator">=</span> <span class="token number">15978</span><span class="token punctuation">;</span>
			<span class="token comment">// ...</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">ConfusingName</span> <span class="token punctuation">{</span>
	<span class="token comment">// 不允许与父类的成员变量名称相同</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> stock<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="11"><li><p>【强制】杜绝完全不规范的缩写，避免望文不知义。<br>
反例：AbstractClass“缩写”命名成 AbsClass；condition“缩写”命名成 condi，此类随意缩写严重降低了代码的可阅读性。</p></li> <li><p>【推荐】为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达。<br>
正例：在 JDK 中，对某个对象引用的 <code>volatile</code> 字段进行原子更新的类名为：<code>AtomicReferenceFieldUpdater</code>。<br>
反例：常见的方法内变量为 <code>int a;</code> 的定义方式。</p></li> <li><p>【推荐】在常量与变量的命名时，表示类型的名词放在词尾，以提升辨识度。<br>
正例：startTime / workQueue / nameList / TERMINATED_THREAD_COUNT<br>
反例：startedAt / QueueOfWork / listName / COUNT_TERMINATED_THREAD</p></li> <li><p>【推荐】如果模块、接口、类、方法使用了设计模式，在命名时需体现出具体模式。<br>
说明：将设计模式体现在名字中，有利于阅读者快速理解架构设计理念。<br>
正例：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderFactory</span><span class="token punctuation">;</span>  
	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginProxy</span><span class="token punctuation">;</span>  
	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceObserver</span><span class="token punctuation">;</span>
</code></pre></div><ol start="15"><li><p>【推荐】接口类中的方法和属性不要加任何修饰符号（<code>public</code> 也不要加），保持代码的简洁性，并加上有效的 Javadoc 注释。尽量不要在接口里定义变量，如果一定要定义变量，确定与接口方法相关，并且是整个应用的基础常量。<br>
正例：接口方法签名 <code>void commit();</code> 接口基础常量 <code>String COMPANY = &quot;alibaba&quot;;</code><br>
反例：接口方法定义 <code>public abstract void f();</code><br>
说明：JDK8 中接口允许有默认实现，那么这个 default 方法，是对所有实现类都有价值的默认实现。</p></li> <li><p>接口和实现类的命名有两套规则：<br>
1）【强制】对于 Service 和 DAO 类，基于 SOA 的理念，暴露出来的服务一定是接口，内部的实现类用 Impl 的后缀与接口区别。<br>
正例：CacheServiceImpl 实现 CacheService 接口。<br>
2）【推荐】如果是形容能力的接口名称，取对应的形容词为接口名（通常是–able 的形容词）。<br>
正例：AbstractTranslator 实现 Translatable 接口。</p></li> <li><p>【参考】枚举类名带上 <code>Enum</code> 后缀，枚举成员名称需要全大写，单词间用下划线隔开。<br>
说明：枚举其实就是特殊的常量类，且构造方法被默认强制是私有。<br>
正例：枚举名字为 ProcessStatusEnum 的成员名称：SUCCESS / UNKNOWN_REASON。</p></li> <li><p>【参考】各层命名规约：<br>
A) Service/DAO 层方法命名规约<br>
1） 获取单个对象的方法用 get 做前缀。<br>
2） 获取多个对象的方法用 list 做前缀，复数结尾，如：listObjects。<br>
3） 获取统计值的方法用 count 做前缀。<br>
4） 插入的方法用 save/insert 做前缀。<br>
5） 删除的方法用 remove/delete 做前缀。<br>
6） 修改的方法用 update 做前缀。<br>
B) 领域模型命名规约<br>
1） 数据对象：xxxDO，xxx 即为数据表名。<br>
2） 数据传输对象：xxxDTO，xxx 为业务领域相关的名称。<br>
3） 展示对象：xxxVO，xxx 一般为网页名称。<br>
4） POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO</p></li></ol> <h2 id="二-常量定义"><a href="#二-常量定义" class="header-anchor">#</a> (二) 常量定义</h2> <ol><li>【强制】不允许任何魔法值（即未经预先定义的常量）直接出现在代码中。<br>
反例：</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//本例中同学 A 定义了缓存的 key，然后缓存提取的同学 B 使用了 Id#taobao 来提取，少了下划线，导致故障。</span>
<span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token string">&quot;Id#taobao_&quot;</span> <span class="token operator">+</span> tradeId<span class="token punctuation">;</span>
cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li><p>【强制】在 <code>long</code> 或者 <code>Long</code> 赋值时，数值后使用大写的 L，不能是小写的 l，小写容易跟数字混淆，造成误解。<br>
说明：<code>Long a = 2l;</code> 写的是数字的 21，还是 <code>Long</code> 型的 2。</p></li> <li><p>【推荐】不要使用一个常量类维护所有常量，要按常量功能进行归类，分开维护。<br>
说明：大而全的常量类，杂乱无章，使用查找功能才能定位到修改的常量，不利于理解，也不利于维护。<br>
正例：缓存相关常量放在类 CacheConsts 下；系统配置相关常量放在类 ConfigConsts 下。</p></li> <li><p>【推荐】常量的复用层次有五层：跨应用共享常量、应用内共享常量、子工程内共享常量、包内共享常量、类内共享常量。<br>
1） 跨应用共享常量：放置在二方库中，通常是 client.jar 中的 constant 目录下。<br>
2） 应用内共享常量：放置在一方库中，通常是子模块中的 constant 目录下。<br>
反例：易懂变量也要统一定义成应用内共享常量，两位工程师在两个类中分别定义了“YES”的变量：
类 A 中：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> YES <span class="token operator">=</span> <span class="token string">&quot;yes&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>类 B 中：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> YES <span class="token operator">=</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><code>A.YES.equals(B.YES)</code>，预期是 true，但实际返回为 false，导致线上问题。<br>
3） 子工程内部共享常量：即在当前子工程的 constant 目录下。<br>
4） 包内共享常量：即在当前包下单独的 constant 目录下。<br>
5） 类内共享常量：直接在类内部 private static final 定义。</p></li> <li><p>【推荐】如果变量值仅在一个固定范围内变化用 <code>enum</code> 类型来定义。<br>
说明：如果存在名称之外的延伸属性应使用 <code>enum</code> 类型，下面正例中的数字就是延伸信息，表示一年中的第几个季节。<br>
正例：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">SeasonEnum</span> <span class="token punctuation">{</span>
	<span class="token function">SPRING</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUMMER</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AUTUMN</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WINTER</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> seq<span class="token punctuation">;</span>
	<span class="token class-name">SeasonEnum</span><span class="token punctuation">(</span><span class="token keyword">int</span> seq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>seq <span class="token operator">=</span> seq<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		 <span class="token keyword">return</span> seq<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="三-代码格式"><a href="#三-代码格式" class="header-anchor">#</a> (三) 代码格式</h2> <ol><li><p>【强制】如果是大括号内为空，则简洁地写成{}即可，大括号中间无需换行和空格；如果是非空代码块则：<br>
1） 左大括号前不换行。<br>
2） 左大括号后换行。<br>
3） 右大括号前换行。<br>
4） 右大括号后还有 else 等代码则不换行；表示终止的右大括号后必须换行。</p></li> <li><p>【强制】左小括号和右边相邻字符之间不出现空格；右小括号和左边相邻字符之间也不出现空格；而左大括号前需要加空格。详见第 5 条下方正例提示。<br>
反例：if (空格 a == b 空格)</p></li> <li><p>【强制】<code>if</code>/<code>for</code>/<code>while</code>/<code>switch</code>/<code>do</code> 等保留字与括号之间都必须加空格。</p></li> <li><p>【强制】任何二目、三目运算符的左右两边都需要加一个空格。<br>
说明：包括赋值运算符=、逻辑运算符&amp;&amp;、加减乘除符号等。</p></li> <li><p>【强制】采用 4 个空格缩进，禁止使用 tab 字符。<br>
说明：如果使用 tab 缩进，必须设置 1 个 tab 为 4 个空格。IDEA 设置 tab 为 4 个空格时，请勿勾选 Use tab character；而在 eclipse 中，必须勾选 insert spaces for tabs。<br>
正例： （涉及 1-5 点）</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 缩进 4 个空格</span>
	<span class="token class-name">String</span> say <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
	<span class="token comment">// 运算符的左右必须有一个空格</span>
	<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">// 关键词 if 与括号之间必须有一个空格，括号内的 f 与左括号，0 与右括号不需要空格</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>say<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 左大括号前加空格且不换行；左大括号后换行</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 右大括号前换行，右大括号后有 else，不用换行</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ok&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 在右大括号后直接结束，则必须换行</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>【强制】注释的双斜线与注释内容之间有且仅有一个空格。<br>
正例：</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 这是示例注释，请注意在双斜线之后有一个空格</span>
<span class="token class-name">String</span> commentString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="7"><li>【强制】在进行类型强制转换时，右括号与强制转换值之间不需要任何空格隔开。<br>
正例：</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">long</span> first <span class="token operator">=</span> <span class="token number">1000000000000L</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> second <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>first <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><ol start="8"><li>【强制】单行字符数限制不超过 120 个，超出需要换行，换行时遵循如下原则：<br>
1）第二行相对第一行缩进 4 个空格，从第三行开始，不再继续缩进，参考示例。<br>
2）运算符与下文一起换行。<br>
3）方法调用的点符号与下文一起换行。<br>
4）方法调用中的多个参数需要换行时，在逗号后进行。<br>
5）在括号前不要换行，见反例。<br>
正例：</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 超过 120 个字符的情况下，换行缩进 4 个空格，并且方法前的点号一起换行</span>
sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;zi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;xin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;huang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;huang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;huang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>反例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 超过 120 个字符的情况下，不要在括号前换行</span>
sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;you&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;are&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>append
 <span class="token punctuation">(</span><span class="token string">&quot;lucky&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 参数很多的方法调用可能超过 120 个字符，逗号后才是换行处</span>
<span class="token function">method</span><span class="token punctuation">(</span>args1<span class="token punctuation">,</span> args2<span class="token punctuation">,</span> args3<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token punctuation">,</span> argsX<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="9"><li><p>【强制】方法参数在定义和传入时，多个参数逗号后边必须加空格。<br>
正例：下例中实参的 args1，后边必须要有一个空格。<br> <code>method(args1, args2, args3);</code></p></li> <li><p>【强制】IDE 的 text file encoding 设置为 UTF-8; IDE 中文件的换行符使用 Unix 格式，不要
使用 Windows 格式。</p></li> <li><p>【推荐】单个方法的总行数不超过 80 行。<br>
说明：除注释之外的方法签名、左右大括号、方法内代码、空行、回车及任何不可见字符的总行数不超过 80 行。<br>
正例：代码逻辑分清红花和绿叶，个性和共性，绿叶逻辑单独出来成为额外方法，使主干代码更加清晰；共性逻辑抽取成为共性方法，便于复用和维护。</p></li> <li><p>【推荐】没有必要增加若干空格来使变量的赋值等号与上一行对应位置的等号对齐。<br>
正例：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> one <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> two <span class="token operator">=</span> <span class="token number">2L</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> three <span class="token operator">=</span> <span class="token number">3F</span><span class="token punctuation">;</span>
<span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>说明：增加 sb 这个变量，如果需要对齐，则给 one、two、three 都要增加几个空格，在变量比较多的情况下，是非常累赘的事情。</p> <ol start="13"><li>【推荐】不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。<br>
说明：任何情形，没有必要插入多个空行进行隔开。</li></ol> <h2 id="四-oop-规约"><a href="#四-oop-规约" class="header-anchor">#</a> (四) OOP 规约</h2> <ol><li><p>【强制】避免通过一个类的对象引用访问此类的静态变量或静态方法，无谓增加编译器解析成本，直接用类名来访问即可。</p></li> <li><p>【强制】所有的覆写方法，必须加<code>@Override</code>注解。<br>
说明：<code>getObject()</code>与 <code>get0bject()</code>的问题。一个是字母的 O，一个是数字的 0，加<code>@Override</code>可以准确判断是否覆盖成功。另外，如果在抽象类中对方法签名进行修改，其实现类会马上编译报错。</p></li> <li><p>【强制】相同参数类型，相同业务含义，才可以使用 Java 的可变参数，避免使用 <code>Object</code>。<br>
说明：可变参数必须放置在参数列表的最后。（提倡同学们尽量不用可变参数编程）<br>
正例：<code>public List&lt;User&gt; listUsers(String type, Long... ids) {...}</code></p></li> <li><p>【强制】外部正在调用或者二方库依赖的接口，不允许修改方法签名，避免对接口调用方产生影响。接口过时必须加<code>@Deprecated</code>注解，并清晰地说明采用的新接口或者新服务是什么。</p></li> <li><p>【强制】不能使用过时的类或方法。<br>
说明：<code>java.net.URLDecoder</code> 中的方法<code>decode(String encodeStr)</code>这个方法已经过时，应该使用双参数<code>decode(String source, String encode)</code>。接口提供方既然明确是过时接口，那么有义务同时提供新的接口；
作为调用方来说，有义务去考证过时方法的新实现是什么。</p></li> <li><p>【强制】<code>Object</code> 的 <code>equals</code> 方法容易抛空指针异常，应使用常量或确定有值的对象来调用 <code>equals</code>。
正例：<code>&quot;test&quot;.equals(object)</code>;
反例：<code>object.equals(&quot;test&quot;)</code>;
说明：推荐使用 <code>java.util.Objects#equals</code>（JDK7 引入的工具类）。</p></li> <li><p>【强制】所有整型包装类对象之间值的比较，全部使用 <code>equals</code> 方法比较。
说明：对于 <code>Integer var = ?</code> 在-128 至 127 之间的赋值，<code>Integer</code> 对象是在 <code>IntegerCache.cache</code> 产生，会复用已有对象，这个区间内的 <code>Integer</code> 值可以直接使用<code>==</code>进行判断，但是这个区间之外的所有数据，都会在堆上产生，并不会复用已有对象，这是一个大坑，推荐使用 <code>equals</code> 方法进行判断。</p></li> <li><p>【强制】任何货币金额，均以最小货币单位且整型类型来进行存储。</p></li> <li><p>【强制】浮点数之间的等值判断，基本数据类型不能用==来比较，包装数据类型不能用<code>equals</code>来判断。
说明：浮点数采用“尾数+阶码”的编码方式，类似于科学计数法的“有效数字+指数”的表示方式。二进制无法精确表示大部分的十进制小数，具体原理参考《码出高效》。<br>
反例：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">float</span> a <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">-</span> <span class="token number">0.9f</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> b <span class="token operator">=</span> <span class="token number">0.9f</span> <span class="token operator">-</span> <span class="token number">0.8f</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 预期进入此代码快，执行其它业务逻辑</span>
	<span class="token comment">// 但事实上 a==b 的结果为 false</span>
<span class="token punctuation">}</span>
<span class="token class-name">Float</span> x <span class="token operator">=</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Float</span> y <span class="token operator">=</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 预期进入此代码快，执行其它业务逻辑</span>
	<span class="token comment">// 但事实上 equals 的结果为 false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>正例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//(1) 指定一个误差范围，两个浮点数的差值在此范围之内，则认为是相等的。</span>
<span class="token keyword">float</span> a <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">-</span> <span class="token number">0.9f</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> b <span class="token operator">=</span> <span class="token number">0.9f</span> <span class="token operator">-</span> <span class="token number">0.8f</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> diff <span class="token operator">=</span> <span class="token number">1e-6f</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> diff<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//(2) 使用 BigDecimal 来定义值，再进行浮点数的运算操作。</span>
<span class="token class-name">BigDecimal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;1.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigDecimal</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;0.9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigDecimal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;0.8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigDecimal</span> x <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigDecimal</span> y <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="10"><li><p>【强制】定义数据对象 DO 类时，属性类型要与数据库字段类型相匹配。<br>
正例：数据库字段的 <code>bigint</code> 必须与类属性的 <code>Long</code> 类型相对应。
反例：某个案例的数据库表 id 字段定义类型 <code>bigint unsigned</code>，实际类对象属性为 <code>Integer</code>，随着 id 越来越大，超过 <code>Integer</code> 的表示范围而溢出成为负数。</p></li> <li><p>【强制】禁止使用构造方法 <code>BigDecimal(double)</code>的方式把 <code>double</code> 值转化为 <code>BigDecimal</code> 对象。<br>
说明：<code>BigDecimal(double)</code>存在精度损失风险，在精确计算或值比较的场景中可能会导致业务逻辑异常。
如：<code>BigDecimal g = new BigDecimal(0.1f)</code>; 实际的存储值为：0.10000000149<br>
正例：优先推荐入参为 <code>String</code> 的构造方法，或使用 <code>BigDecimal</code> 的 <code>valueOf</code> 方法，此方法内部其实执行了<code>Double</code>的 <code>toString</code>，而<code>Double</code>的<code>toString</code>按<code>double</code>的实际能表达的精度对尾数进行了截断。</p></li> <li><p>关于基本数据类型与包装数据类型的使用标准如下：<br>
1） 【强制】所有的 POJO 类属性必须使用包装数据类型。<br>
2） 【强制】RPC 方法的返回值和参数必须使用包装数据类型。<br>
3） 【推荐】所有的局部变量使用基本数据类型。<br>
说明：POJO 类属性没有初值是提醒使用者在需要使用时，必须自己显式地进行赋值，任何 NPE 问题，或者入库检查，都由使用者来保证。<br>
正例：数据库的查询结果可能是 null，因为自动拆箱，用基本数据类型接收有 NPE 风险。<br>
反例：某业务的交易报表上显示成交总额涨跌情况，即正负 x%，x 为基本数据类型，调用的 RPC 服务，调用不成功时，返回的是默认值，页面显示为 0%，这是不合理的，应该显示成中划线-。所以包装数据类型的 <code>null</code> 值，能够表示额外的信息，如：远程调用失败，异常退出。</p></li> <li><p>【强制】定义 DO/DTO/VO 等 POJO 类时，不要设定任何属性默认值。<br>
反例：POJO 类的 createTime 默认值为 new Date()，但是这个属性在数据提取时并没有置入具体值，在更新其它字段时又附带更新了此字段，导致创建时间被修改成当前时间。</p></li> <li><p>【强制】序列化类新增属性时，请不要修改 <code>serialVersionUID</code> 字段，避免反序列失败；如果完全不兼容升级，避免反序列化混乱，那么请修改 <code>serialVersionUID</code> 值。<br>
说明：注意 <code>serialVersionUID</code> 不一致会抛出序列化运行时异常。</p></li> <li><p>【强制】构造方法里面禁止加入任何业务逻辑，如果有初始化逻辑，请放在 <code>init</code> 方法中。</p></li> <li><p>【强制】POJO 类必须写 <code>toString</code> 方法。使用 IDE 中的工具：<strong>source&gt; generate toString</strong> 时，如果继承了另一个 POJO 类，注意在前面加一下 <code>super.toString</code>。<br>
说明：在方法执行抛出异常时，可以直接调用 POJO 的 <code>toString()</code>方法打印其属性值，便于排查问题。</p></li> <li><p>【强制】禁止在 POJO 类中，同时存在对应属性 xxx 的 <code>isXxx()</code>和 <code>getXxx()</code>方法。<br>
说明：框架在调用属性 xxx 的提取方法时，并不能确定哪个方法一定是被优先调用到，神坑之一。</p></li> <li><p>【推荐】使用索引访问用 String 的 split 方法得到的数组时，需做最后一个分隔符后有无内容的检查，否则会有抛 <code>IndexOutOfBoundsException</code> 的风险。
说明：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;a,b,c,,&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ary <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 预期大于 3，结果是 3</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ary<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="19"><li><p>【推荐】当一个类有多个构造方法，或者多个同名方法，这些方法应该按顺序放置在一起，便于阅读，此条规则优先于下一条。</p></li> <li><p>【推荐】 类内方法定义的顺序依次是：公有方法或保护方法 &gt; 私有方法 &gt; getter / setter 方法。<br>
说明：公有方法是类的调用者和维护者最关心的方法，首屏展示最好；保护方法虽然只是子类关心，也可能是“模板设计模式”下的核心方法；而私有方法外部一般不需要特别关心，是一个黑盒实现；因为承载的信息价值较低，所有 Service 和 DAO 的 getter/setter 方法放在类体最后。</p></li> <li><p>【推荐】setter 方法中，参数名称与类成员变量名称一致，this.成员名 = 参数名。在getter/setter 方法中，不要增加业务逻辑，增加排查问题的难度。
反例：</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Integer</span> getData <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="22"><li>【推荐】循环体内，字符串的连接方式，使用 StringBuilder 的 append 方法进行扩展。<br>
说明：下例中，反编译出的字节码文件显示每次循环都会 new 出一个 StringBuilder 对象，然后进行 <code>append</code> 操作，最后通过 <code>toString</code> 方法返回 <code>String</code> 对象，造成内存资源浪费。
反例：</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;start&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 str <span class="token operator">=</span> str <span class="token operator">+</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="23"><li><p>【推荐】<code>final</code> 可以声明类、成员变量、方法、以及本地变量，下列情况使用 <code>final</code> 关键字：
1） 不允许被继承的类，如：String 类。
2） 不允许修改引用的域对象，如：POJO 类的域变量。
3） 不允许被覆写的方法，如：POJO 类的 setter 方法。
4） 不允许运行过程中重新赋值的局部变量。
5） 避免上下文重复使用一个变量，使用 final 可以强制重新定义一个变量，方便更好地进行重构。</p></li> <li><p>【推荐】慎用 <code>Object</code> 的 <code>clone</code> 方法来拷贝对象。<br>
说明：对象 <code>clone</code> 方法默认是浅拷贝，若想实现深拷贝需覆写 <code>clone</code> 方法实现域对象的深度遍历式拷贝。</p></li> <li><p>【推荐】类成员与方法访问控制从严：<br>
1） 如果不允许外部直接通过 <code>new</code> 来创建对象，那么构造方法必须是 <code>private</code>。<br>
2） 工具类不允许有 <code>public</code> 或 default 构造方法。<br>
3） 类非 <code>static</code> 成员变量并且与子类共享，必须是 <code>protected</code>。<br>
4） 类非 <code>static</code> 成员变量并且仅在本类使用，必须是 <code>private</code>。<br>
5） 类 <code>static</code> 成员变量如果仅在本类使用，必须是 <code>private</code>。<br>
6） 若是 <code>static</code> 成员变量，考虑是否为 <code>final</code>。
7） 类成员方法只供类内部调用，必须是 <code>private</code>。<br>
8） 类成员方法只对继承类公开，那么限制为 <code>protected</code>。<br>
说明：任何类、方法、参数、变量，严控访问范围。过于宽泛的访问范围，不利于模块解耦。<br>
思考：如果是一个 <code>private</code> 的方法，想删除就删除，可是一个 <code>public</code> 的 service 成员方法或成员变量，删除一下，不得手心冒点汗吗？变量像自己的小孩，尽量在自己的视线内，变量作用域太大，无限制的到处跑，那么你会担心的。</p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-04-29 09:13:44</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/backend/java/a-1.html">
        第1章 对象导论
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.eaf28791.js" defer></script><script src="/assets/js/2.fa3ecc99.js" defer></script><script src="/assets/js/11.95a60a95.js" defer></script><script src="/assets/js/3.10cb9937.js" defer></script>
  </body>
</html>
