<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第12章 异常 | 小二温不胜</title>
    <meta name="description" content="温不胜的blog">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.ea35a998.css" as="style"><link rel="preload" href="/assets/js/app.10c1c13f.js" as="script"><link rel="preload" href="/assets/js/2.fa3ecc99.js" as="script"><link rel="preload" href="/assets/js/25.929c3fca.js" as="script"><link rel="preload" href="/assets/js/3.10cb9937.js" as="script"><link rel="prefetch" href="/assets/js/10.a03c2ffe.js"><link rel="prefetch" href="/assets/js/11.bdc83512.js"><link rel="prefetch" href="/assets/js/12.94078cac.js"><link rel="prefetch" href="/assets/js/13.58107504.js"><link rel="prefetch" href="/assets/js/14.6a9ff23a.js"><link rel="prefetch" href="/assets/js/15.e6716263.js"><link rel="prefetch" href="/assets/js/16.96b2c630.js"><link rel="prefetch" href="/assets/js/17.6c9e5c6b.js"><link rel="prefetch" href="/assets/js/18.c001d191.js"><link rel="prefetch" href="/assets/js/19.48f58e56.js"><link rel="prefetch" href="/assets/js/20.6eb2b873.js"><link rel="prefetch" href="/assets/js/21.b4a230f8.js"><link rel="prefetch" href="/assets/js/22.7ceac6ef.js"><link rel="prefetch" href="/assets/js/23.820766ea.js"><link rel="prefetch" href="/assets/js/24.bc33463e.js"><link rel="prefetch" href="/assets/js/26.5fffa4f6.js"><link rel="prefetch" href="/assets/js/27.8312e26b.js"><link rel="prefetch" href="/assets/js/28.9a15119b.js"><link rel="prefetch" href="/assets/js/29.8128f2c0.js"><link rel="prefetch" href="/assets/js/30.70fedbf3.js"><link rel="prefetch" href="/assets/js/31.fb2658f8.js"><link rel="prefetch" href="/assets/js/32.5a8e5707.js"><link rel="prefetch" href="/assets/js/33.5870336c.js"><link rel="prefetch" href="/assets/js/34.0dcd9875.js"><link rel="prefetch" href="/assets/js/35.ec55084c.js"><link rel="prefetch" href="/assets/js/36.b24eab3c.js"><link rel="prefetch" href="/assets/js/37.3329a339.js"><link rel="prefetch" href="/assets/js/38.40a7166e.js"><link rel="prefetch" href="/assets/js/39.77e4e097.js"><link rel="prefetch" href="/assets/js/4.32658406.js"><link rel="prefetch" href="/assets/js/40.567720fd.js"><link rel="prefetch" href="/assets/js/41.88174cc8.js"><link rel="prefetch" href="/assets/js/42.fc49013b.js"><link rel="prefetch" href="/assets/js/43.41d4a4e8.js"><link rel="prefetch" href="/assets/js/44.6967dae4.js"><link rel="prefetch" href="/assets/js/45.05734d1e.js"><link rel="prefetch" href="/assets/js/46.fb614d20.js"><link rel="prefetch" href="/assets/js/47.ead2fe38.js"><link rel="prefetch" href="/assets/js/48.5e68634f.js"><link rel="prefetch" href="/assets/js/49.a4c5fdd5.js"><link rel="prefetch" href="/assets/js/5.7c40eeda.js"><link rel="prefetch" href="/assets/js/50.674d4167.js"><link rel="prefetch" href="/assets/js/51.cb900666.js"><link rel="prefetch" href="/assets/js/52.7f87acbb.js"><link rel="prefetch" href="/assets/js/53.98ffb2b4.js"><link rel="prefetch" href="/assets/js/54.e57c8fd2.js"><link rel="prefetch" href="/assets/js/55.2dea174d.js"><link rel="prefetch" href="/assets/js/56.0b9235ce.js"><link rel="prefetch" href="/assets/js/57.f95d41fe.js"><link rel="prefetch" href="/assets/js/58.cd7ca77b.js"><link rel="prefetch" href="/assets/js/59.c78d2a7e.js"><link rel="prefetch" href="/assets/js/6.790efdf0.js"><link rel="prefetch" href="/assets/js/60.8257a463.js"><link rel="prefetch" href="/assets/js/61.4183c659.js"><link rel="prefetch" href="/assets/js/62.01274bd2.js"><link rel="prefetch" href="/assets/js/63.733cba0f.js"><link rel="prefetch" href="/assets/js/64.2fd8a2e9.js"><link rel="prefetch" href="/assets/js/65.066b5664.js"><link rel="prefetch" href="/assets/js/66.9a94ef38.js"><link rel="prefetch" href="/assets/js/67.bdef4e1f.js"><link rel="prefetch" href="/assets/js/68.3fb0d22a.js"><link rel="prefetch" href="/assets/js/69.3d8f5729.js"><link rel="prefetch" href="/assets/js/7.45479c89.js"><link rel="prefetch" href="/assets/js/70.217b7672.js"><link rel="prefetch" href="/assets/js/71.9cd66616.js"><link rel="prefetch" href="/assets/js/72.90e5ea20.js"><link rel="prefetch" href="/assets/js/73.cd56aba0.js"><link rel="prefetch" href="/assets/js/74.60435126.js"><link rel="prefetch" href="/assets/js/75.368a28da.js"><link rel="prefetch" href="/assets/js/76.daf915e4.js"><link rel="prefetch" href="/assets/js/77.a9ea5045.js"><link rel="prefetch" href="/assets/js/78.c08d4b3d.js"><link rel="prefetch" href="/assets/js/79.313e12c1.js"><link rel="prefetch" href="/assets/js/8.bca3974e.js"><link rel="prefetch" href="/assets/js/80.be26f581.js"><link rel="prefetch" href="/assets/js/81.38356a37.js"><link rel="prefetch" href="/assets/js/82.74ea24ce.js"><link rel="prefetch" href="/assets/js/83.35e087e1.js"><link rel="prefetch" href="/assets/js/9.8b949133.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea35a998.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小二温不胜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/backend/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/backend/internet/" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/navicat/" class="nav-link">
  Navicat
</a></li><li class="dropdown-item"><!----> <a href="/tools/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/tools/nginx/" class="nav-link">
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/cicd/" class="nav-link">
  CICD
</a></li><li class="dropdown-item"><!----> <a href="/others/sdk/" class="nav-link">
  SDK
</a></li><li class="dropdown-item"><!----> <a href="/others/issues/" class="nav-link">
  Issues
</a></li><li class="dropdown-item"><!----> <a href="/others/utils/" class="nav-link">
  Utils
</a></li><li class="dropdown-item"><!----> <a href="/others/work/" class="nav-link">
  工作记录
</a></li><li class="dropdown-item"><!----> <a href="/others/interview/" class="nav-link">
  面试宝典
</a></li></ul></div></div> <a href="https://github.com/JinbiaoYin/myblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/backend/go/" class="nav-link">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/backend/internet/" class="nav-link">
  计算机网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/navicat/" class="nav-link">
  Navicat
</a></li><li class="dropdown-item"><!----> <a href="/tools/maven/" class="nav-link">
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/tools/nginx/" class="nav-link">
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/cicd/" class="nav-link">
  CICD
</a></li><li class="dropdown-item"><!----> <a href="/others/sdk/" class="nav-link">
  SDK
</a></li><li class="dropdown-item"><!----> <a href="/others/issues/" class="nav-link">
  Issues
</a></li><li class="dropdown-item"><!----> <a href="/others/utils/" class="nav-link">
  Utils
</a></li><li class="dropdown-item"><!----> <a href="/others/work/" class="nav-link">
  工作记录
</a></li><li class="dropdown-item"><!----> <a href="/others/interview/" class="nav-link">
  面试宝典
</a></li></ul></div></div> <a href="https://github.com/JinbiaoYin/myblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JAVA</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/java/" class="sidebar-link">代码规范</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java 编程思想</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/java/a-1.html" class="sidebar-link">第1章 对象导论</a></li><li><a href="/backend/java/b-2.html" class="sidebar-link">第2章 一切都是对象</a></li><li><a href="/backend/java/c-3.html" class="sidebar-link">第3章 操作符</a></li><li><a href="/backend/java/d-4.html" class="sidebar-link">第4章 控制执行流程</a></li><li><a href="/backend/java/e-5.html" class="sidebar-link">第5章 初始化与清理</a></li><li><a href="/backend/java/f-6.html" class="sidebar-link">第6章 访问权限控制</a></li><li><a href="/backend/java/h-7.html" class="sidebar-link">第7章 复用类</a></li><li><a href="/backend/java/i-8.html" class="sidebar-link">第8章 多态</a></li><li><a href="/backend/java/j-9.html" class="sidebar-link">第9章 接口</a></li><li><a href="/backend/java/k-10.html" class="sidebar-link">第10章 内部类</a></li><li><a href="/backend/java/l-11.html" class="sidebar-link">第11章 持有对象</a></li><li><a href="/backend/java/m-12.html" class="active sidebar-link">第12章 异常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-1-概念" class="sidebar-link">12.1 概念</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-2-异常参数" class="sidebar-link">12.2 异常参数</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-3-捕获异常" class="sidebar-link">12.3 捕获异常</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-4-创建自定义异常" class="sidebar-link">12.4 创建自定义异常</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-5-异常说明" class="sidebar-link">12.5 异常说明</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-6-捕获所有异常" class="sidebar-link">12.6 捕获所有异常</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-7-java-标准异常" class="sidebar-link">12.7 Java 标准异常</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-8-finally" class="sidebar-link">12.8 finally</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-9-异常的限制（暂不理解）" class="sidebar-link">12.9 异常的限制（暂不理解）</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-10-构造器" class="sidebar-link">12.10 构造器</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-11-异常匹配" class="sidebar-link">12.11 异常匹配</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-12-异常处理" class="sidebar-link">12.12 异常处理</a></li><li class="sidebar-sub-header"><a href="/backend/java/m-12.html#_12-14-总结" class="sidebar-link">12.14 总结</a></li></ul></li><li><a href="/backend/java/n-13.html" class="sidebar-link">第13章 字符串</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/java/elasticsearch.html" class="sidebar-link">Elastic Search</a></li><li><a href="/backend/java/lombok.html" class="sidebar-link">lombok</a></li><li><a href="/backend/java/mybatis.html" class="sidebar-link">mybatis</a></li><li><a href="/backend/java/quartz.html" class="sidebar-link">quartz</a></li><li><a href="/backend/java/rabbitMQ.html" class="sidebar-link">RabbitMQ</a></li><li><a href="/backend/java/spring-security-oauth2.html" class="sidebar-link">Spring Security Oauth2</a></li><li><a href="/backend/java/swagger.html" class="sidebar-link">swagger</a></li><li><a href="/backend/java/websocket.html" class="sidebar-link">websocket</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>本章介绍如何编写正确的异常处理程序，并展示当方法出问题的时候，如何产生自定义的异常。</p> <img src="/backend/java/throwable.jpg"> <h2 id="_12-1-概念"><a href="#_12-1-概念" class="header-anchor">#</a> 12.1 概念</h2> <p>使用异常可以将问题提交给上一级，还可以降低错误处理代码的复杂度，将“正常的执行过程”和“出了问题怎么办”的代码相分离，使代码的阅读，编写和调试工作更加井井有条。</p> <h2 id="_12-2-异常参数"><a href="#_12-2-异常参数" class="header-anchor">#</a> 12.2 异常参数</h2> <p>用<code>new</code>在堆上创建异常对象，所有标准异常类都有两个构造器：默认构造器；接收字符串为参数，以便把相关信息放入异常对象的构造器。
<code>throw new NullPointerException(&quot; t = null &quot;);</code></p> <p>使用<code>new</code>创建了异常对象后，对象的引用将传给<code>throw</code>。返回的异常对象其类型与方法的返回类型不同，从效果上看，它就像是从方法返回的。可以简单的把异常处理看成一种不同的返回机制。</p> <p><code>Throwable</code>对象是异常类型的根类。通常对于不同类型的错误，要抛出相应的异常。错误信息可以保存在异常对象内部或者用异常类的名称来暗示。</p> <h2 id="_12-3-捕获异常"><a href="#_12-3-捕获异常" class="header-anchor">#</a> 12.3 捕获异常</h2> <h3 id="_12-3-1-try"><a href="#_12-3-1-try" class="header-anchor">#</a> 12.3.1 try</h3> <p>在<code>try</code>块里尝试各种可能产生异常的方法调用。</p> <h3 id="_12-3-2-异常处理程序"><a href="#_12-3-2-异常处理程序" class="header-anchor">#</a> 12.3.2 异常处理程序</h3> <p>抛出的异常必须在某处得到处理。这个“地点”就是<strong>异常处理程序</strong>，紧跟在<code>try</code>块之后，以关键字<code>catch</code>表示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//可能会产生异常的代码</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception1</span> e1<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//处理Exception1异常的方法</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception2</span> e2<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//处理Exception2异常的方法</span>
<span class="token punctuation">}</span>
</code></pre></div><p>异常处理程序必须紧跟在<code>try</code>块之后。当异常被抛出时，异常处理机制将负责搜寻参数与异常类型相匹配的第一个处理程序。然后进入<code>catch</code>子句执行，此时认为异常得到了处理。<code>catch</code>子句结束，处理程序的查找过程结束。与<code>switch</code>不同，只有匹配到<code>catch</code>会被执行，而<code>switch</code>没有<code>break</code>会执行后续的<code>case</code>子句。</p> <h2 id="_12-4-创建自定义异常"><a href="#_12-4-创建自定义异常" class="header-anchor">#</a> 12.4 创建自定义异常</h2> <p>要自定义异常，必须从已有的异常类继承，最简单的方法就是编译器为你产生默认构造器。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MyException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>本例中没有Exception(String)的构造器，这种构造器也不实用，一般用类型来表现异常就够了。</p> <p>异常处理程序中，一般调用在<code>Throwable</code>类中声明的<code>printStackTrace()</code>方法。信息被输出到标准错误流<code>System.err</code>。</p> <h3 id="_12-4-1-异常与记录日志"><a href="#_12-4-1-异常与记录日志" class="header-anchor">#</a> 12.4.1 异常与记录日志</h3> <p>一般异常输出记录到日志中。jdk中<code>java.util.logging</code>工具（jul）就可以完成。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">LoggingException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;LoggingException&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LoggingException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">StringWriter</span> trace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">severe</span><span class="token punctuation">(</span>trace<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>静态的<code>Logger.getLogger()</code>方法创建了一个<code>String</code>参数相关联的<code>Logger</code>对象，这个<code>Logger</code>对象会将其输出发送到<code>System.err</code>。<code>printStackTrace()</code>将异常输出到<code>trace</code>中，使用<code>severe()</code>方法将<code>trace</code>记录到日志。</p></div> <p>我们这里将日志的基础设置都构建在异常本身，日志记录不需要调用者的干预就可以运行。但是如果要捕获其它人的异常，就必须在<code>catch</code>中生成日志消息。</p> <p>还可以进一步自定义异常，例如覆盖<code>Trowable.getMessage()</code>方法，以产生更详细的信息，有点类似于<code>toString()</code>方法。</p> <p>异常也是对象的一种，所以可以通过修改异常类，得到更强的功能。但是客户端程序员可能仅仅查看一下抛出的异常类型，其它的就不管了（Jdk
中的异常也都是这么用的），所以对异常不需要过度设计，也许根本用不上。</p> <h2 id="_12-5-异常说明"><a href="#_12-5-异常说明" class="header-anchor">#</a> 12.5 异常说明</h2> <p>使用<code>throws</code>关键字告诉客户端程序员可能会抛出的异常类型。从<code>RuntimeException</code>继承的异常，它们可以在没有异常说明的情况下被抛出，而从非<code>RuntimeException</code>继承的异常，在方法上做了异常声明之后，在调用处手动捕获。</p> <p>如果方法的代码里产生了异常却没有进行处理，编译器会提醒你：要么处理这个异常，要么就在异常说明中声明这个方法将产生异常。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>异常说明仅是说明这个方法可能会产生这个异常，并不是一定会产生。</p></div> <h2 id="_12-6-捕获所有异常"><a href="#_12-6-捕获所有异常" class="header-anchor">#</a> 12.6 捕获所有异常</h2> <p>可以写一个<code>catch</code>用来捕获所有可能产生的异常。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>最好把它放在处理程序列表的末尾，防止它在其它处理程序之前把异常捕获了。</p> <p><code>Exception</code>是所有异常的基类，它从它的基类<code>Throwable</code>继承了方法。
<code>String getMessage()</code>,<code>String getLocalizedMessage()</code>用来获取详细信息，或用本地语言表示的详细信息。<code>String toString()</code>返回对<code>Throwable</code>的简单表述，要是有详细信息，也会把它包含在内。
<code>void printStackTrace()</code>,<code>void printStackTrace(PrintStream)</code>,<code>void printStackTrace(java.io.PrintWriter)</code>打印<code>Throwable</code>和<code>Throwable</code>的调用<strong>栈轨迹</strong>。</p> <p>调用栈显式了“把你带到异常抛出地点”的方法调用序列。其中第一个版本输出到标准错误，后两个版本允许选择要输出的流。</p> <h3 id="_12-6-1-栈轨迹"><a href="#_12-6-1-栈轨迹" class="header-anchor">#</a> 12.6.1 栈轨迹</h3> <p><code>printStackTrace()</code>返回一个由栈轨迹中的元素构成的数组。</p> <p>栈顶元素是调用序列中的最后一个方法调用（这个<code>Throwable</code>被创建和抛出之处）。栈底元素是调用序列中的第一个方法调用。</p> <h3 id="_12-6-2-重新抛出异常"><a href="#_12-6-2-重新抛出异常" class="header-anchor">#</a> 12.6.2 重新抛出异常</h3> <p>可以在<code>catch</code>中重新<code>throw</code>异常，将异常抛给上一级环境中的异常处理程序。</p> <h2 id="_12-7-java-标准异常"><a href="#_12-7-java-标准异常" class="header-anchor">#</a> 12.7 Java 标准异常</h2> <p><code>Throwable</code>分为两种类型：<code>Error</code>和<code>Exception</code>。</p> <ul><li><code>Error</code>用来表示编译时和系统错误，除特殊情况一般不需要关心</li> <li><code>Exception</code>是可以被抛出的基本类型。</li></ul> <h3 id="_12-7-1-特例：runtimeexception"><a href="#_12-7-1-特例：runtimeexception" class="header-anchor">#</a> 12.7.1 特例：RuntimeException</h3> <p>它被称为<strong>运行时异常</strong>，在运行时会自动被Java虚拟机抛出，所以不用在异常说明中把这类列出来。</p> <p><code>RuntimeException</code>在代码中通常不用被手动捕获（当然也可以手动捕获它），但是其它类型的异常必须由我们强制实施。</p> <p><code>RuntimeException</code>代表的是编程错误：</p> <ul><li>无法预料的错误。比如你传递了<code>null</code>引用。</li> <li>应该在代码中检查的错误，比如数组越界。</li></ul> <h2 id="_12-8-finally"><a href="#_12-8-finally" class="header-anchor">#</a> 12.8 finally</h2> <p><code>try</code>块中，无论异常是否被抛出，<code>finally</code>子句总能被执行。</p> <h3 id="_12-8-1-finally的作用"><a href="#_12-8-1-finally的作用" class="header-anchor">#</a> 12.8.1 finally的作用</h3> <p><code>finally</code>用来清理的资源包括：已经打开的文件或网络连接，在屏幕上画的图形，甚至是外部世界的某个开关。</p> <h3 id="_12-8-2-return与finally"><a href="#_12-8-2-return与finally" class="header-anchor">#</a> 12.8.2 return与finally</h3> <p>在<code>try</code>中使用<code>return</code>，也会执行<code>finally</code>。</p> <h3 id="_12-8-3-异常丢失"><a href="#_12-8-3-异常丢失" class="header-anchor">#</a> 12.8.3 异常丢失</h3> <p>在<code>finally</code>中抛出异常会丢失原有的异常，在<code>finally</code>中使用<code>return</code>也会丢失抛出的异常。</p> <h2 id="_12-9-异常的限制（暂不理解）"><a href="#_12-9-异常的限制（暂不理解）" class="header-anchor">#</a> 12.9 异常的限制（暂不理解）</h2> <p>子类构造器的异常说明必须包含父类构造器的异常说明。</p> <p>父类方法没有异常声明，子类对其覆盖的方法也不能有异常声明。父类方法有异常声明，子类覆盖方法可以不抛出任何异常。</p> <p>异常说明本身不属于方法类型的一部分，方法类型是由方法的名字与参数的类型组成的。因此，不能基于异常说明来重载方法。一个出现在基类方法异常说明中的异常，不一定会出现在派生类方法的异常说明。</p> <p>这与继承的规则不同。</p> <p>在继承中，基类的方法必须出现在派生类里。在继承和覆盖的过程中，某个特定方法的“异常说明的接口”不是变大了而是变小了。——这恰好和类接口在继承时的情形相反。</p> <h2 id="_12-10-构造器"><a href="#_12-10-构造器" class="header-anchor">#</a> 12.10 构造器</h2> <p>构造器抛出异常时，需要自己注意如何清理。</p> <h2 id="_12-11-异常匹配"><a href="#_12-11-异常匹配" class="header-anchor">#</a> 12.11 异常匹配</h2> <p>抛出异常时，异常处理系统会按照书写顺序找出最近的处理程序。</p> <h2 id="_12-12-异常处理"><a href="#_12-12-异常处理" class="header-anchor">#</a> 12.12 异常处理</h2> <p>异常说明可能有两种意思：一个是“我的代码会产生这种异常，这由你来处理”。另一个是“我的代码忽略了这些异常，这由你来处理”。</p> <p>如果不知道怎么处理这个异常，可以将异常暂时转换成<code>RuntimeException</code>。</p> <h2 id="_12-14-总结"><a href="#_12-14-总结" class="header-anchor">#</a> 12.14 总结</h2> <p>错误报告是异常的精髓所在。</p> <p>异常将常规代码与特殊情况产生的错误处理代码分离，使你的代码更清晰。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-04-21 08:05:14</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/backend/java/l-11.html" class="prev">
        第11章 持有对象
      </a></span> <span class="next"><a href="/backend/java/n-13.html">
        第13章 字符串
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.10c1c13f.js" defer></script><script src="/assets/js/2.fa3ecc99.js" defer></script><script src="/assets/js/25.929c3fca.js" defer></script><script src="/assets/js/3.10cb9937.js" defer></script>
  </body>
</html>
