---
autoGroup-1: Java 编程思想
title: 第2章 一切都是对象
---

## 2.1 用引用操纵对象

Java 中用**引用**操纵对象。

## 2.2 必须由你创建所有对象

### 2.2.1 存储到什么地方
程序运行时，内存如何分配。有五个不同的地方可以存储数据。

1. **寄存器**。最快的存储区，位于CPU内部，数量有限，Java中不能直接控制也感受不到它的存在。
2. **堆栈**。位于RAM，即内存中。创建程序时，Java必须知道所有存储在堆栈内所有项的确切生命周期，以便上下移动堆栈指针。指针向下移动，分配新的内存，向上移动，释放对应内存。某些Java数据存储于堆栈中，特别是对象引用，但是Java对象不存储于其中。
3. **堆**。通用的内存池，也位于内存。用于存放所有的Java对象。堆不同堆栈的好处是：编译器不需要知道堆中存储数据的生命周期。因此，在堆里分配存储有很大的灵活性。当需要一个对象时，只需 `new` 写一行简单的代码，当执行时，会自动在堆里进行存储分配。缺点是：用堆进行存储可能会比用堆栈存储分配需要更长时间。
4. **常量存储**。常量值通常直接存放在程序代码内部，它们永远不会被改变。可以选择将其存放在ROM中。
5. **非RAM存储**。如果数据完全存活于程序之外，那么它不受程序的任何控制，在程序没有运行时也可以存在。两个基本的例子是**流对象**和**持久化对象**。**流对象**中，对象转为成字节流，通常发送给另一台机器。**持久化对象**中，对象被存放于磁盘上，因此程序终止也可以保持自己的状态。这种方式的技巧在于：可以把对象转化成可以存放在其它媒介上的食物，需要时可以恢复成常规的RAM对象。

### 2.2.2 特例：基本类型

用 `new` 将对象存储在**堆**里，但是用 `new` 创建一个对象——特别是小的，简单的对象，不是很有效。因此，这里小的简单的类型不用 `new` 来创建变量，而是用并非是引用的**自动变量**。这个变量直接存储值，并置于**堆栈**中，更加高效。

Java的基本数据类型：
- `boolean`。所占存储空间大小没有明确指定。
- `char`。2个字节。
- `byte`。1个字节。
- `short`。2个字节。
- `int`。4个字节。
- `long`。8个字节。
- `float`。4个字节。
- `double`。8个字节。
- `void`。

每个基本都对应一个包装类型。

使用包装类 `new` ,可以在**堆**中创建一个**非基本对象**。

高精度数字：`BigInteger`,`BigDecimal`。能用于`int`和`float`的操作，也同样能用于这两个类型。但是必须以方法调用来取代运算符。运算速度比较慢，这里以速度换取精度。
`BigInteger` 支持任意精度的整数。可以准确表示任何大小的整数值。
`BigDecimal` 支持任何精度的定点数。用它可以进行精确的货币计算。


