---
autoGroup-1: Java 编程思想
title: 第11章 持有对象
---

> 如果一个程序只包含固定数量的且其生命期都是已知的对象，那么这是一个非常简单的程序。

Java 中有多种方式保存对象（应该说是对象的引用）。

- 数组是保存一组对象的最有效的方式，但是数组有固定的尺寸，一般你写程序时并不知道将需要多少个对象。

- Java 实用类库还提供了一套相当完整的容器类来解决这个问题，其中基本的类型是`List`,`Set`,`Queue`和`Map`。这些对象类型也称之为**集合类**，但由于 Java 的类库中使用了 `Collection` 这个名字来指代该类库的一个特殊子集。所以我们用“容器”来称呼。

容器有一些特性。例如，`Set`对每个值都只保存一个对象，`Map`是允许你保存**关联数组**（key-value）。容器类自动调整尺寸，不需要我们来考虑容器应该设置为多大。

## 11.1 泛型
使用**泛型**在编译期防止将错误类型的对象放置到容器中。

## 11.2 基本概念

<img :src="$withBase('/backend/java/Collection.jpg')">

- `Collection`。一个独立元素的序列，`List`必须按照插入顺序保存元素，`Set`不能有重复元素。`Queue`按照**排队规则**来确定对象产生的顺序（通常与它们被插入的顺序相同）。

<img :src="$withBase('/backend/java/Map.jpg')">

- `Map`。“键值对”对象，也被称为“关联数组”。它将某些对象与另外一些对象关联在一起。你可以使用键对象来查找值对象。

## 11.3 添加一组元素
`Arrays`和`Collections`类中都提供了很多实用方法。

`Arrays.asList()`方法接受一个数组或是用一个逗号分隔的元素列表，将其转换为一个`List`对象。例如：
```java
List<Integer> integers = Arrays.asList(1, 2, 3, 4, 5);
//或
Integer[] ints = {1,2,3,4,5};
List<Integer> integers = Arrays.asList(ints);
```

`Collections.addAll()`可以接收一个`Collection`对象，以及一个数组或是用逗号分割的列表。例如：
```java
List<Integer> integers = new ArrayList<Integer>(Arrays.asList(1,2,3,4,5));

Collections.addAll(integers, 6,7,8);
//或
Integer[] ints = {6,7,8};
Collections.addAll(integers, ints);
```

::: warning
使用`Arrays.asList()`将数组当成`List`,但是这种情况下，底层表示的是数组，因此不能调整尺寸。如果你试图用`add()`或`delete()`方法在这种列表中添加或删除元素，就有可能会引发改变数组尺寸的尝试，将在运行时获得“Unsupported Operation(不支持的操作)”错误。

`Arrays.asList()`会根据其中的元素来创建它的`List<>`引用，如果你使用了错误的泛型，则无法通过编译。例如:
```java
List<Object> powders = Arrays.asList("A","B","C");
```
:::