---
title: 第3章 服务器性能剖析
---

## 3.1 性能优化简介
我们将性能定义为完成某件任务所需要的时间度量，换句话说，性能即响应时间。

### 3.1.1 通过性能剖析进行优化
性能剖析是测量和分析时间花费在哪里的主要方法。一般有两个步骤：测量任务所花费的时间；然后对结果进行统计和排序，将重要的任务排到前面。


### 3.1.2 理解性能剖析
一款好的性能剖析工具会显示可能的“丢失的时间”。丢失的时间指的是任务的总时间和实际测量到的时间之间的差。例如，如果处理器的CPU时间是10秒，而剖析到的任务总时间是9.7秒，那么就有300毫秒的丢失时间。这可能是有些任务没有测量到，也可能是由于测量的误差和精度问题的缘故。如果工具发现了这类问题，则要引起重视，因为有可能错过了某些重要的事情。即使性能剖析没有发现丢失时间，也需要注意考虑这类问题存在的可能性，这样才不会错过重要的信息。

性能剖析无法显示所有响应时间的分布。只相信平均值是非常危险的。