---
title: 第3章 操作符
---

> 在最底层，Java 中的数据是通过使用操作符来操作的。

## 3.1 静态导入
可以使用**静态导入**`import static `的方式来导入其它类库。例如：
```java
import static java.lang.System.out;
import static java.lang.Integer.*;

public class TestStaticImport {
   public static void main(String[] args) {
       out.println(MAX_VALUE);
       out.println(toHexString(42));
    }
}
```

## 3.3 操作符优先级
当执行操作符运算时，由于程序员经常忘记优先级顺序，所以最好使用小括号来明确规定运算顺序。

当`String`类型元素后出现"+"操作符，编译器会试图将之后的非`String`元素转换成`String`。

## 3.4 赋值运算
基本类型实际存储了实际的值，并非指向了一个对象的**引用**。所以赋值时，是将一个地方的内容直接复制到另一处，这与对象的**引用**不同。

在对对象赋值时，实际操作的是对象的**引用**，将对象的**引用**从一个地方复制到另一地方。

方法中的形参也是如此，传递的也只是对象的引用。

## 3.5 Random 的简单说明
如果在创建`Random`的对象时，没有传递任何参数，那么Java就会将当前时间作为随机数生成器的种子，由此在程序每一次执行时都产生不同的输出。

如果在创建`Random`对象时提供种子，随机数生成器对于特定的种子值总是产生相同的随机数序列。因此每次执行程序时都生成相同的随机数。

通过`Random`的对象可以生成不同类型的随机数，例如`nextInt()`,`nextLong()`等，传给它们的参数为产生随机数的上限，下限为0。如果你要**1~100**，那么你需要`nextInt(100)+1`

## 3.6 前缀式和后缀式
分为**前缀式**和**后缀式**，**前缀式**先运算再生成值，**后缀式**先生成值再运算。

## 3.7 关系操作符
### 3.7.1 测试对象的等价性
与基本数据类型相比，**==** 和 **!=** 比较的是对象的**引用**，所以要比较对象是否相同，应该使用 `equals()` 。这个方法不适用于基本数据类型。

**注意：**当创建一个类时，`equals()`的默认行为是**比较引用**，若需要期望的效果，需要**覆盖**它。

## 3.8 逻辑操作符
- 与(`&&`)
- 或(`||`)
- 非(`!`)

### 3.8.1 短路运算
一旦能够确定整个表达式的值，就不再计算表达式余下部分，因此，整个逻辑表达式靠后的部分有可能不会被运算。

如果所有的逻辑表达式都有一部分不必计算，那么将获得潜在性能提升。

## 3.9 基本类型的窄型转化
可以使用直接常量来表示八进制数，十六进制数等。

如果将 `int` 类型强制转换成 `short`，`byte`等类型，超出范围的数据会进行**窄型转化**。例如：`int = 0x101` 转换成 `byte`，`byte`的范围是 `-128~127`，无法存储**257**，这时会发生**窄型转化**，结果为**1**。

## 3.10 按位操作符
与(`&`)，或(`|`)，非(`~`)，异或(`^`)，对**二进制位**进行操作。

## 3.11 移位操作符
**移位操作符**操作的运算对象也是二进制的位，只能用来处理整数类型。

左移位操作符(`<<`)能够按照移动位数向左移动（在低位补0）。右移位操作符(`>>`)则按照位数向右移动，若符号为正，则高位补0；若符号为负，则高位补1。

Java 中还提供了“无符号”右移位操作符(`>>>`)，无论正负，都在高位补0。

## 3.13 字符串操作符 + 和 +=
如果表达式以字符串开头，那么所有后续操作数都必须是字符串型。

## 3.15 类型转换:显式和扩展
**窄化转换**是将高类型的数据转换成低类型的数据，有可能发生信息丢失的风险，编译器会强制我们进行**显式类型转换**，而**扩展转换**则不必要进行**显示类型转换**，因为新类型肯定能容纳原类型信息，不会造成信息丢失。

Java允许任何基本类型之间的转换，但布尔型不允许进行任何类型的转换处理。

### 3.15.1 截尾和舍入
浮点型转换成整数时，会自动截尾。若要四舍五入，可使用`Math.round()`方法。

### 3.15.2 类型自动提升
表达式中最大的数据类型决定了表达式最终结果的数据类型。

## 3.17 总结
能够对布尔型进行的运算非常有限，只能赋予它`true`和`false`，不能将布尔值相加和其它运算。

在`char`,`byte`,`short`中，使用算术操作符中数据类型提升。对这些类型进行算术运算都会获得`int`结果，必须**显式类型转换**回原类型，可能会发生**窄化转换**。

